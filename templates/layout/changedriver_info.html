{% extends 'layout/sabase.html' %}

{% block content %}
<div style="height: 100vh; width: 100vw; display: flex; flex-direction: column; margin: 0; padding: 0; background-color: white;">
    {% if not change_lanes %}
        <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <h1 class="text-dark" style="font-size: 18rem;">&nbsp;</h1>
        </div>
    {% else %}
        {% for change_lane in change_lanes %}
            <div style="flex: 1; display: flex; align-items: center; justify-content: center; border-bottom: 1px solid #ddd;">
                {% if change_lane.driver %}
                    <span class="text-danger" style="font-size: 18rem;">
                        {{ change_lane.driver.team.team.number }}
                    </span>
                {% endif %}
            </div>
        {% endfor %}
    {% endif %}
</div>

<script>
    const socket = new WebSocket(`ws://${window.location.host}/ws/changedriver/`);

    socket.onmessage = function (event) {
        const data = JSON.parse(event.data);
        document.querySelector('body').innerHTML = data.driverc_html;
    };
</script>
{% endblock %}
